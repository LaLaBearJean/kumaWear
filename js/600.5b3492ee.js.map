{"version":3,"file":"js/600.5b3492ee.js","mappings":"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","sources":["webpack://works/./src/views/Frontend/SearchProduct.vue","webpack://works/./src/views/Frontend/SearchProduct.vue?1509"],"sourcesContent":["<template>\r\n  <LoadingOverlay :active=\"isLoading\"/>\r\n  <div class=\"row row-cols-2 row-cols-md-3\" v-if=\"filterProducts.length\">\r\n    <div class=\"col product-list mb-3\" v-for=\"item in filterProducts\" :key=\"item.id\">\r\n      <div class=\"card border-0 h-100 position-relative\">\r\n        <a href=\"#\" class=\"text-decoration-none h-100\" @click.prevent=\"getProduct(item.id)\">\r\n          <div class=\"product-img\">\r\n            <img :src=\"item.imageUrl\" class=\"card-img-top rounded-0 object-fit-cover w-100\" style=\"height: 180px;\" :alt=\"item.title\">\r\n          </div>\r\n          <div class=\"card-body text-center\">\r\n            <h5 class=\"card-title text-black\">{{ item.title }}</h5>\r\n            <p class=\"card-text h5 fw-bold text-warning\">NT$ {{ $filters.currency(item.price) }}</p>\r\n            <del class=\"text-secondary m-0\">NT$ {{ $filters.currency(item.origin_price) }}</del>\r\n          </div>\r\n        </a>\r\n        <div class=\"card-body p-0\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button type=\"button\" class=\"btn btn-outline-secondary w-100\" @click=\"addCart(item.id)\" :disabled=\"status.loadingItem === item.id\">加入購物車</button>\r\n            <a href=\"#\" class=\"link-danger favProduct\" v-if=\"!isFavProduct(item.id)\" @click.prevent=\"addWishList(item)\"><i class=\"bi bi-heart fs-4\"></i></a>\r\n            <a href=\"#\" class=\"link-danger favProduct\" v-if=\"isFavProduct(item.id)\" @click.prevent=\"removeWishList(item)\"><i class=\"bi bi-heart-fill fs-4\"></i></a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <h6>很抱歉，找不到{{ id }}</h6>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: ['id'],\r\n  data () {\r\n    return {\r\n      products: [],\r\n      wishlist: JSON.parse(localStorage.getItem('wishlist')) || [],\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  inject: ['reload', '$httpMessageState', 'emitter', 'updateWishQty'],\r\n  computed: {\r\n    filterProducts () {\r\n      return this.products.filter(i => i.title.match(this.id))\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(api)\r\n        .then((res) => {\r\n          this.products = res.data.products\r\n          this.isLoading = false\r\n        })\r\n        .catch((err) => {\r\n          this.$httpMessageState(err, '連線')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/user/product/${id}`)\r\n    },\r\n    addCart (id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.status.loadingItem = id\r\n      this.isLoading = true\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(api, { data: cart })\r\n        .then((res) => {\r\n          this.status.loadingItem = ''\r\n          this.reload()\r\n          this.isLoading = false\r\n          setTimeout(() => {\r\n            this.$httpMessageState(res, '加入購物車')\r\n          })\r\n        })\r\n        .catch((err) => {\r\n          this.$httpMessageState(err, '連線')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    isFavProduct (id) {\r\n      return this.wishlist.some(x => x.id === id)\r\n    },\r\n    addWishList (item) {\r\n      this.wishlist.push(item)\r\n      localStorage.setItem('wishlist', JSON.stringify(this.wishlist))\r\n      this.updateWishQty(this.wishlist.length)\r\n      this.emitter.emit('push-message', {\r\n        style: 'success',\r\n        title: `${item.title}已加入最愛`\r\n      })\r\n    },\r\n    removeWishList (item) {\r\n      this.wishlist = this.wishlist.filter(i => {\r\n        return i.id !== item.id\r\n      })\r\n      localStorage.setItem('wishlist', JSON.stringify(this.wishlist))\r\n      this.updateWishQty(this.wishlist.length)\r\n      this.emitter.emit('push-message', {\r\n        style: 'danger',\r\n        title: `${item.title}已刪除最愛商品`\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./SearchProduct.vue?vue&type=template&id=70535293\"\nimport script from \"./SearchProduct.vue?vue&type=script&lang=js\"\nexport * from \"./SearchProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Jean\\\\OneDrive\\\\桌面\\\\履歷作品\\\\works\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_14","_hoisted_17","_createVNode","_component_LoadingOverlay","active","$data","isLoading","$options","filterProducts","length","_createElementBlock","_hoisted_1","_Fragment","_renderList","item","key","id","_hoisted_2","href","onClick","_withModifiers","$event","getProduct","_hoisted_4","src","imageUrl","style","alt","title","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_ctx","$filters","currency","price","_hoisted_9","origin_price","_hoisted_10","_hoisted_11","type","addCart","disabled","status","loadingItem","_hoisted_12","isFavProduct","addWishList","removeWishList","_hoisted_19","$props","props","data","products","wishlist","JSON","parse","localStorage","getItem","inject","computed","this","filter","i","match","methods","getProducts","api","$http","get","then","res","catch","err","$httpMessageState","$router","push","cart","product_id","qty","post","reload","setTimeout","some","x","setItem","stringify","updateWishQty","emitter","emit","created","__exports__","render"],"sourceRoot":""}