"use strict";(self["webpackChunkworks"]=self["webpackChunkworks"]||[]).push([[216],{3397:function(t,s,e){e.d(s,{Z:function(){return u}});var r=e(3396);const l={class:"stepper-wrapper list-unstyled d-flex justify-content-around mb-4",ref:"stepper"},n=(0,r.uE)('<li><span class="step-content"><i class="bi bi-cart fs-4"></i></span><span>購物車</span></li><li><span class="step-content"><i class="bi bi-credit-card fs-4"></i></span><span>付款</span></li><li><span class="step-content"><i class="bi bi-check-circle fs-4"></i></span><span>完成</span></li>',3),a=[n];function i(t,s,e,n,i,o){return(0,r.wg)(),(0,r.iD)("ul",l,a,512)}var o={methods:{addStepperStatus(t){this.$refs.stepper.childNodes.forEach(((s,e)=>{t===e+1?s.classList.add("active"):s.classList.remove("active")}))}}},c=e(89);const d=(0,c.Z)(o,[["render",i]]);var u=d},8216:function(t,s,e){e.r(s),e.d(s,{default:function(){return Z}});var r=e(3396),l=e(9242),n=e(7139);const a={class:"row justify-content-center"},i={class:"link-hover-color"},o=(0,r._)("i",{class:"bi bi-caret-down"},null,-1),c={class:"table collapse my-2",ref:"collapse"},d=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"品名"),(0,r._)("th",{scope:"col"},"數量"),(0,r._)("th",{scope:"col"},"單價")])],-1),u={class:"text-end"},p=(0,r._)("td",{colspan:"2",class:"text-end"},"總計:",-1),h={class:"text-end"},_=(0,r._)("h4",{class:"fw-bold mt-4 mb-3 text-center"},"寄件資料",-1),g={class:"table"},f=(0,r._)("th",null,"收件人姓名",-1),m=(0,r._)("th",null,"收件人電話",-1),w=(0,r._)("th",null,"收件人地址",-1),b=(0,r._)("th",null,"Email",-1),v={key:0},y=(0,r._)("th",null,"備註",-1),k=(0,r._)("th",null,"付款狀態",-1),$={key:0,class:"text-success"},x={key:1,class:"text-muted"},z=(0,r._)("div",{class:"text-end"},[(0,r._)("button",{type:"submit",class:"btn btn-outline-warning"},"付款去")],-1);function L(t,s,e,L,C,S){const D=(0,r.up)("LoadingOverlay"),O=(0,r.up)("ProgressBar");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(D,{active:C.isLoading},null,8,["active"]),(0,r.Wm)(O,{ref:"stepperComponent"},null,512),(0,r._)("div",a,[(0,r._)("form",{class:"col-md-8",onSubmit:s[1]||(s[1]=(...t)=>S.payOrder&&S.payOrder(...t))},[(0,r._)("div",i,[(0,r._)("a",{href:"#",class:"bg-light p-3",onClick:s[0]||(s[0]=(0,l.iM)(((...s)=>t.toggleCollapse&&t.toggleCollapse(...s)),["prevent"]))},[(0,r.Uk)("購物清單 "),o])]),(0,r._)("table",c,[d,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(C.order.products,(s=>((0,r.wg)(),(0,r.iD)("tr",{key:s.id},[(0,r._)("td",null,(0,n.zw)(s.product.title),1),(0,r._)("td",null,(0,n.zw)(s.qty)+"/"+(0,n.zw)(s.product.unit),1),(0,r._)("td",u,"NT$ "+(0,n.zw)(t.$filters.currency(s.final_total)),1)])))),128))]),(0,r._)("tfoot",null,[(0,r._)("tr",null,[p,(0,r._)("td",h,"NT$ "+(0,n.zw)(t.$filters.currency(C.order.total)),1)])])],512),_,(0,r._)("table",g,[(0,r._)("tbody",null,[(0,r._)("tr",null,[f,(0,r._)("td",null,(0,n.zw)(C.order.user.name),1)]),(0,r._)("tr",null,[m,(0,r._)("td",null,(0,n.zw)(C.order.user.tel),1)]),(0,r._)("tr",null,[w,(0,r._)("td",null,(0,n.zw)(C.order.user.address),1)]),(0,r._)("tr",null,[b,(0,r._)("td",null,(0,n.zw)(C.order.user.email),1)]),C.order.message?((0,r.wg)(),(0,r.iD)("tr",v,[y,(0,r._)("td",null,(0,n.zw)(C.order.message),1)])):(0,r.kq)("",!0),(0,r._)("tr",null,[k,C.order.is_paid?((0,r.wg)(),(0,r.iD)("td",$,"付款完成")):((0,r.wg)(),(0,r.iD)("td",x,"尚未付款"))])])]),z],32)])],64)}e(7658);var C=e(903),S=e(3397),D={data(){return{orderId:"",order:{user:{}},isLoading:!1,Collapse:""}},components:{ProgressBar:S.Z},mixins:[C.Z],inject:["$httpMessageState"],methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/shoppingmall-api/order/${this.orderId}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.order=t.data.order,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線")}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/api/shoppingmall-api/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(t).then((t=>{t.data.success&&this.$router.push("/user/orderprocessed"),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線"),this.isLoading=!1}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()},mounted(){this.$refs.stepperComponent.addStepperStatus(2)}},O=e(89);const I=(0,O.Z)(D,[["render",L]]);var Z=I}}]);
//# sourceMappingURL=216.efe146b2.js.map